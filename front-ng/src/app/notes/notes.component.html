<div #notesBlock class="wrapper">

  <div class="hat">

    <div class="play-menu">
      <i class="large material-icons" (click)="addSong()">add_circle</i>
      <i #playBtn class="large material-icons" (click)="play()">play_circle_filled</i>
      <i class="large material-icons" (click)="stop()">replay</i>
    </div>

    <div class="song-title">
      <b>{{ song.artist }}</b>&nbsp;-&nbsp;<b>{{ song.title }}</b>&nbsp;by&nbsp;<strong>{{ song.name }}</strong>
      {{ song.tag !== '' ? '(' + song.tag + ')': '' }}
    </div>

    <div class="action-menu">
      <div class="hat-btn">
        <i class="large material-icons start" (click)="streamStart()" *ngIf="login === user && !ws">voice_chat</i>
        <i class="large material-icons start" (click)="streamPlay()" *ngIf="login !== user && !ws">tv</i>
        <i class="large material-icons stop" (click)="streamStop()" *ngIf="ws">videocam_off</i>
      </div>

      <a class="hat-btn" routerLink="/todo/info" appHoversvg>
        <svg version="1.1" width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
          <text id="helpTxt" x="10" y="25">
            <tspan id="helpSpan">
              ?
            </tspan>
          </text>
        </svg>
      </a>

      <fa-icon [icon]="faArrowsAlt"></fa-icon>
    </div>

  </div>

  <div class="bar">
    <div class="speed" contenteditable="true" appChangedNotes="speed" (blur)="changeSpeed($event)">{{ speed }}</div>
    <div class="numerator" contenteditable="true" appChangedNotes="numerator" (blur)="changeSize($event, true)">
      {{ numerator }}
    </div>
    <div class="denominator" contenteditable="true" appChangedNotes="denominator" (blur)="changeSize($event, false)">
      {{ denominator }}
    </div>
  </div>
  <div *ngFor="let column of notes; index as i" class="column" [class.last-column]="i % barLength === barLength - 1">
    <i class="large material-icons" [class.selected]="selectedColumn === i" (click)="selectionClick(i)">place</i>
    <input type="text" *ngFor="let note of column.split(''); index as j" class="note" appChangedNotes="note"
           [value]="note !== '-' ? guitar.class.getNumByLetter(note) : '-'" placeholder="-"
           (blur)="changeNote($event, i, j)">
  </div>
  <div class="info-notes">
    <div class="plus-btn" (click)="plusColumns()"></div>
    <div [ngClass]="{'successful-saving': successfulSaving,
      'unsuccessful-saving': !successfulSaving && successfulSaving !== null}"></div>
  </div>
</div>
